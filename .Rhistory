alcuse <- as.numeric(alcuse$under13)
alcuse <- as.numeric(alcuse$under13)
library(dplyr)
library(stringr)
library(data.table)
alcyear <- read.csv("H&S #5 - alc v3.csv")
alcyear
alcgraph <- alcyear %>%
select(-ends_with("Limit"), - ends_with("N"))
colnames(alcgraph) <- str_sub(colnames(alcgraph), start = 2L, end = -3L)
alcgraph <- rename(alcgraph, c('Question' = 'uestion'))
alcgraph[1, 2] = 32.7
alcgraph[1, 1] <- "Alcohol.under.13"
alcgraph[2, 1] <- "Current.alcohol.consumption"
alcgraph
alcuse <- slice(alcgraph, c(1,2))
alcuse
alcuse <- alcuse[-c(1)]
colnames(alcuse) <- NULL
alcuse
alcuse <- t(alcuse)
alcuse
alcuse <- as.data.frame(alcuse)
colnames(alcuse) <- c("under13", "underagealcoholuse")
alcuse$year <- c(1991, 1993, 1995, 1999, 2001, 2003, 2005, 2007, 2009, 2011, 2013, 2015, 2017, 2019, 2021)
alcuse
library(dplyr)
library(stringr)
library(data.table)
alcyear <- read.csv("H&S #5 - alc v3.csv")
alcyear
alcgraph <- alcyear %>%
select(-ends_with("Limit"), - ends_with("N"))
colnames(alcgraph) <- str_sub(colnames(alcgraph), start = 2L, end = -3L)
alcgraph <- rename(alcgraph, c('Question' = 'uestion'))
alcgraph[1, 2] = 32.7
alcgraph[1, 1] <- "Alcohol.under.13"
alcgraph[2, 1] <- "Current.alcohol.consumption"
alcgraph
alcuse <- slice(alcgraph, c(1,2))
alcuse
alcuse <- alcuse[-c(1)]
colnames(alcuse) <- NULL
alcuse
alcuse <- t(alcuse)
alcuse
alcuse <- as.data.frame(alcuse)
colnames(alcuse) <- c("under13", "underagealcoholuse")
alcuse$year <- c(1991, 1993, 1995, 1999, 2001, 2003, 2005, 2007, 2009, 2011, 2013, 2015, 2017, 2019, 2021)
alcuse
library(dplyr)
library(stringr)
library(data.table)
alcyear <- read.csv("H&S #5 - alc v3.csv")
alcyear
alcgraph <- alcyear %>%
select(-ends_with("Limit"), - ends_with("N"))
colnames(alcgraph) <- str_sub(colnames(alcgraph), start = 2L, end = -3L)
alcgraph <- rename(alcgraph, c('Question' = 'uestion'))
alcgraph[1, 2] = 32.7
alcgraph[1, 1] <- "Alcohol.under.13"
alcgraph[2, 1] <- "Current.alcohol.consumption"
alcgraph
alcuse <- slice(alcgraph, c(1,2))
alcuse
alcuse <- alcuse[-c(1)]
colnames(alcuse) <- NULL
alcuse
alcuse <- t(alcuse)
alcuse
alcuse <- as.data.frame(alcuse)
colnames(alcuse) <- c("under13", "underagealcoholuse")
alcuse$year <- c(1991, 1993, 1995, 1999, 2001, 2003, 2005, 2007, 2009, 2011, 2013, 2015, 2017, 2019, 2021)
alcuse
alcuse <- as.numeric(alcuse$under13) %>%
as.numeric(alcuse$underagealcoholuse)
alcuse
alcuse <- t(alcuse)
alcuse <- as.numeric(alcuse$under13) %>%
as.numeric(alcuse$underagealcoholuse)
alcuse <- t(alcuse)
alcuse
alcuse <- t(alcuse)
alcuse
alcuse <- alcuse[-c(1)]
colnames(alcuse) <- NULL
alcuse
library(dplyr)
library(stringr)
library(data.table)
alcyear <- read.csv("H&S #5 - alc v3.csv")
alcyear
alcgraph <- alcyear %>%
select(-ends_with("Limit"), - ends_with("N"))
colnames(alcgraph) <- str_sub(colnames(alcgraph), start = 2L, end = -3L)
alcgraph <- rename(alcgraph, c('Question' = 'uestion'))
alcgraph[1, 2] = 32.7
alcgraph[1, 1] <- "Alcohol.under.13"
alcgraph[2, 1] <- "Current.alcohol.consumption"
alcgraph
alcuse <- slice(alcgraph, c(1,2))
alcuse
alcuse <- alcuse[-c(1)]
colnames(alcuse) <- NULL
alcuse
alcuse <- t(alcuse)
alcuse
alcuse <- as.data.frame(alcuse)
colnames(alcuse) <- c("under13", "underagealcoholuse")
alcuse$year <- c(1991, 1993, 1995, 1999, 2001, 2003, 2005, 2007, 2009, 2011, 2013, 2015, 2017, 2019, 2021)
alcuse
alcuse <- as.numeric(alcuse$under13) %>%
as.numeric(alcuse$underagealcoholuse)
alcuse
alcusegraph <- ggplot(alcuse, aes(x = year), fill = 'transparent') +
geom_point(color = "#f30562", aes(y=under13), fill = 'transparent') +
geom_line(color = "#999", aes(y=under13)) +
geom_point(color = "#69d", aes(y = underagealcoholuse)) +
labs(title = "Alcohol Consumption Amongst Minors Has Decreased")
glimps(gss_cat$denom)
glimpse(gss_cat$denom)
library(tidyverse)
month_levels <- c(
"Jan", "Feb", "Mar", "Apr", "May", "Jun",
"Jul", "Aug", "Sep", "Oct", "Nov", "Dec"
)
x1 <- c("Dec", "Apr", "Jan", "Mar")
y1 <- factor(x1, levels = month_levels)
y1
sort(y1)
gss_cat |>
count(race)
gss_cat |>
count(relig) |>
arrange(desc(n))
relig_summary <- gss_cat |>
group_by(relig) |>
summarize(
tvhours = mean(tvhours, na.rm = TRUE),
n = n()
)
ggplot(relig_summary, aes(x = tvhours, y = fct_reorder(relig, tvhours))) +
geom_point() +
theme_minimal()
glimpse(gss_cat$denom)
library(tidyverse)
students <- read_csv("https://pos.it/r4ds-students-csv")
View(students)
library(tidyverse)
students <- read_csv("https://pos.it/r4ds-students-csv",
na = c("N/A", ""))
library(tidyverse)
students <- read_csv("https://pos.it/r4ds-students-csv",
na = c("N/A", ""))
students
library(tidyverse)
students <- read_csv("https://pos.it/r4ds-students-csv",
na = c("N/A", "")) |>
janitor::clean_names()
library(tidyverse)
library(janitor)
install.packages("janitor")
library(janitor)
library(tidyverse)
library(janitor)
students <- read_csv("https://pos.it/r4ds-students-csv",
na = c("N/A", "")) |>
janitor::clean_names()
students
library(tidyverse)
library(janitor)
students <- read_csv("https://pos.it/r4ds-students-csv",
na = c("N/A", "")) |>
janitor::clean_names() |>
mutate(
meal_plan = as_factor(meal_plan)
)
students
library(tidyverse)
library(janitor)
students <- read_csv("https://pos.it/r4ds-students-csv",
na = c("N/A", "")) |>
janitor::clean_names() |>
mutate(
meal_plan = as_factor(meal_plan),
age = as.numeric(age)
)
students
library(tidyverse)
library(nycflights13)
install.packages("nycflights13")
library(nycflights13)
library(tidyverse)
library(nycflights13)
glimpse(nycflights13)
library(tidyverse)
library(nycflights13)
glimpse(flights)
flights |>
select(year, month, day, hour, minute)
flights |>
select(year, month, day, hour, minute) |>
mutate(departure = make_date(year, month, day, hour, minute))
flights |>
select(year, month, day, hour, minute) |>
mutate(departure = make_date(year, month, day))
flights |>
select(year, month, day, hour, minute) |>
mutate(departure = make_datetime(year, month, day, hour, minute))
make_datetime_100 <- function(year, month, day, time) {
make_datetime(year, month, day, time %/% 100, time %% 100)
}
make_datetime_100 <- function(year, month, day, time) {
make_datetime(year, month, day, time %/% 100, time %% 100)
}
flights_dt <- flights |>
filter(!is.na(dep_time), !is.na(arr_time))
make_datetime_100 <- function(year, month, day, time) {
make_datetime(year, month, day, time %/% 100, time %% 100)
}
flights_dt <- flights |>
filter(!is.na(dep_time), !is.na(arr_time))
flights_dt
ymd(c("2010-10-10", "bananas"))
#| label: add-library
library(tidyverse)
#| label: data-read-in
state_24 <- read_csv("data/state-sm-24")
state_24
#| label: data-clean
state_24 <- state_24 |>
mutate(
jurisdiction = as_factor(jurisdiction),
status = as_factor(status)
)
state_24 |>
distinct(jurisdiction) |>
pull(jurisdiction)
state_24 |>
distinct(status) |>
pull(status)
library(tidyverse)
library(rvest)
library(polite)
# read in data
page <- read_html("https://www.ncsl.org/technology-and-communication/social-media-and-children-2024-legislation")
jurisdictions <- page |>
html_elements("td:nth-child(1)") |>
html_text()
bill_numbers <- page |>
html_elements("td:nth-child(2)") |>
html_text()
titles <- page |>
html_elements("td:nth-child(3)") |>
html_text()
statuss <- page |>
html_elements("td:nth-child(4)") |>
html_text()
summarys <- page |>
html_elements("td:nth-child(5)") |>
html_text()
data_raw <- tibble(
jurisdiction = jurisdictions,
number = bill_numbers,
title = titles,
status = statuss,
summary = summarys
)
'%!in%' <- function(x,y)!('%in%'(x,y))
state_data <- data_raw |>
mutate(
jurisdiction = as_factor(jurisdiction),
status = as_factor(status)
) |>
filter(
jurisdiction %!in% c("Guam", "N. Mariana Islands", "Puerto Rico", "A. Samoa", "U.S. Virgin Islands", "District of Columbia")
) |>
mutate(status = fct_relevel(c(
"Failed", "Failed - Adjourned", "Pending", "Vetoed", "To governor", "Adopted", "Pending - Carryover", "Enacted")))
source("~/Documents/GitHub/social-media-state-24/State24-Scrape.R", echo=TRUE)
View(state_data)
library(tidyverse)
library(rvest)
library(polite)
# read in data
page <- read_html("https://www.ncsl.org/technology-and-communication/social-media-and-children-2024-legislation")
jurisdictions <- page |>
html_elements("td:nth-child(1)") |>
html_text()
bill_numbers <- page |>
html_elements("td:nth-child(2)") |>
html_text()
titles <- page |>
html_elements("td:nth-child(3)") |>
html_text()
statuss <- page |>
html_elements("td:nth-child(4)") |>
html_text()
summarys <- page |>
html_elements("td:nth-child(5)") |>
html_text()
data_raw <- tibble(
jurisdiction = jurisdictions,
number = bill_numbers,
title = titles,
status = statuss,
summary = summarys
)
'%!in%' <- function(x,y)!('%in%'(x,y))
state_data <- data_raw |>
mutate(
jurisdiction = as_factor(jurisdiction),
status = as_factor(status)
) |>
filter(
jurisdiction %!in% c("Guam", "N. Mariana Islands", "Puerto Rico", "A. Samoa", "U.S. Virgin Islands", "District of Columbia")
) |>
mutate(status = fct_relevel(status, c(
"Failed", "Failed - Adjourned", "Pending", "Vetoed", "To governor", "Adopted", "Pending - Carryover", "Enacted"))) |>
write_csv("data/state-sm-24")
state_data <- data_raw |>
mutate(
jurisdiction = as_factor(jurisdiction),
status = as_factor(status)
) |>
filter(
jurisdiction %!in% c("Guam", "N. Mariana Islands", "Puerto Rico", "A. Samoa", "U.S. Virgin Islands", "District of Columbia")
) |>
mutate(status = fct_relevel(status, c(
"Failed", "Failed - Adjourned", "Pending", "Vetoed", "To governor", "Adopted", "Pending - Carryover", "Enacted"))) |>
write_csv("data\state-sm-24")
state_data <- data_raw |>
mutate(
jurisdiction = as_factor(jurisdiction),
status = as_factor(status)
) |>
filter(
jurisdiction %!in% c("Guam", "N. Mariana Islands", "Puerto Rico", "A. Samoa", "U.S. Virgin Islands", "District of Columbia")
) |>
mutate(status = fct_relevel(status, c(
"Failed", "Failed - Adjourned", "Pending", "Vetoed", "To governor", "Adopted", "Pending - Carryover", "Enacted"))) |>
write_csv("data/state-sm-24")
state_data <- data_raw |>
mutate(
jurisdiction = as_factor(jurisdiction),
status = as_factor(status)
) |>
filter(
jurisdiction %!in% c("Guam", "N. Mariana Islands", "Puerto Rico", "A. Samoa", "U.S. Virgin Islands", "District of Columbia")
) |>
mutate(status = fct_relevel(status, c(
"Failed", "Failed - Adjourned", "Pending", "Vetoed", "To governor", "Adopted", "Pending - Carryover", "Enacted"))) |>
write_csv("data/state-sm-24")
state_data <- data_raw |>
mutate(
jurisdiction = as_factor(jurisdiction),
status = as_factor(status)
) |>
filter(
jurisdiction %!in% c("Guam", "N. Mariana Islands", "Puerto Rico", "A. Samoa", "U.S. Virgin Islands", "District of Columbia")
) |>
mutate(status = fct_relevel(status, c(
"Failed", "Failed - Adjourned", "Pending", "Vetoed", "To governor", "Adopted", "Pending - Carryover", "Enacted"))) |>
write_csv("data/state-sm-24")
state_data <- data_raw |>
mutate(
jurisdiction = as_factor(jurisdiction),
status = as_factor(status)
) |>
filter(
jurisdiction %!in% c("Guam", "N. Mariana Islands", "Puerto Rico", "A. Samoa", "U.S. Virgin Islands", "District of Columbia")
) |>
mutate(status = fct_relevel(status, c(
"Failed", "Failed - Adjourned", "Pending", "Vetoed", "To governor", "Adopted", "Pending - Carryover", "Enacted"))) |>
write_csv("data/state-sm-24")
state_data <- data_raw |>
mutate(
jurisdiction = as_factor(jurisdiction),
status = as_factor(status)
) |>
filter(
jurisdiction %!in% c("Guam", "N. Mariana Islands", "Puerto Rico", "A. Samoa", "U.S. Virgin Islands", "District of Columbia")
) |>
mutate(status = fct_relevel(status, c(
"Failed", "Failed - Adjourned", "Pending", "Vetoed", "To governor", "Adopted", "Pending - Carryover", "Enacted"))) |>
write_csv("data/state-sm-24")
state_data <- data_raw |>
mutate(
jurisdiction = as_factor(jurisdiction),
status = as_factor(status)
) |>
filter(
jurisdiction %!in% c("Guam", "N. Mariana Islands", "Puerto Rico", "A. Samoa", "U.S. Virgin Islands", "District of Columbia")
) |>
mutate(status = fct_relevel(status, c(
"Failed", "Failed - Adjourned", "Pending", "Vetoed", "To governor", "Adopted", "Pending - Carryover", "Enacted"))) |>
write_csv("data/state-sm-24")
state_data <- data_raw |>
mutate(
jurisdiction = as_factor(jurisdiction),
status = as_factor(status)
) |>
filter(
jurisdiction %!in% c("Guam", "N. Mariana Islands", "Puerto Rico", "A. Samoa", "U.S. Virgin Islands", "District of Columbia")
) |>
mutate(status = fct_relevel(status, c(
"Failed", "Failed - Adjourned", "Pending", "Vetoed", "To governor", "Adopted", "Pending - Carryover", "Enacted"))) |>
write_csv("data/state-sm-24")
state_data <- data_raw |>
mutate(
jurisdiction = as_factor(jurisdiction),
status = as_factor(status)
) |>
filter(
jurisdiction %!in% c("Guam", "N. Mariana Islands", "Puerto Rico", "A. Samoa", "U.S. Virgin Islands", "District of Columbia")
) |>
mutate(status = fct_relevel(status, c(
"Failed", "Failed - Adjourned", "Pending", "Vetoed", "To governor", "Adopted", "Pending - Carryover", "Enacted"))) |>
write_csv("data/state-sm-24")
state_data <- data_raw |>
mutate(
jurisdiction = as_factor(jurisdiction),
status = as_factor(status)
) |>
filter(
jurisdiction %!in% c("Guam", "N. Mariana Islands", "Puerto Rico", "A. Samoa", "U.S. Virgin Islands", "District of Columbia")
) |>
mutate(status = fct_relevel(status, c(
"Failed", "Failed - Adjourned", "Pending", "Vetoed", "To governor", "Adopted", "Pending - Carryover", "Enacted"))) |>
write_csv("data/state-sm-24")
state_data <- data_raw |>
mutate(
jurisdiction = as_factor(jurisdiction),
status = as_factor(status)
) |>
filter(
jurisdiction %!in% c("Guam", "N. Mariana Islands", "Puerto Rico", "A. Samoa", "U.S. Virgin Islands", "District of Columbia")
) |>
mutate(status = fct_relevel(status, c(
"Failed", "Failed - Adjourned", "Pending", "Vetoed", "To governor", "Adopted", "Pending - Carryover", "Enacted"))) |>
write_csv("data/state-sm-24")
state_data <- data_raw |>
mutate(
jurisdiction = as_factor(jurisdiction),
status = as_factor(status)
) |>
filter(
jurisdiction %!in% c("Guam", "N. Mariana Islands", "Puerto Rico", "A. Samoa", "U.S. Virgin Islands", "District of Columbia")
) |>
mutate(status = fct_relevel(status, c(
"Failed", "Failed - Adjourned", "Pending", "Vetoed", "To governor", "Adopted", "Pending - Carryover", "Enacted"))) |>
write_csv("data/state-sm-24")
setwd("~/Documents/GitHub/social-media-state-24")
state_data <- data_raw |>
mutate(
jurisdiction = as_factor(jurisdiction),
status = as_factor(status)
) |>
filter(
jurisdiction %!in% c("Guam", "N. Mariana Islands", "Puerto Rico", "A. Samoa", "U.S. Virgin Islands", "District of Columbia")
) |>
mutate(status = fct_relevel(status, c(
"Failed", "Failed - Adjourned", "Pending", "Vetoed", "To governor", "Adopted", "Pending - Carryover", "Enacted"))) |>
write_csv("data/state-sm-24")
#| label: data-read-in
state_24 <- read_csv("data/state-sm-24")
state_24 |>
distinct(jurisdiction) |>
pull(jurisdiction)
state_24 |>
distinct(status) |>
pull(status)
#| label: data-read-in
state_24 <- read_csv("data/state-sm-24")
#| label: add-library
library(tidyverse)
#| label: data-read-in
state_24 <- read_csv("data/state-sm-24")
state_24 |>
distinct(jurisdiction) |>
pull(jurisdiction)
state_24 |>
distinct(status) |>
pull(status)
#| label: legislation-status
state_24 |>
count(jurisdiction, sort = "TRUE")
state_24 |>
summarize(
state_24, status
)
#| label: legislation-status
state_24 |>
count(jurisdiction, sort = "TRUE")
state_24 |>
summarize(
state_24, n(status)
)
#| label: legislation-status
state_24 |>
count(jurisdiction, sort = "TRUE")
state_24 |>
summarize(
state_24, status, n()
)
#| label: legislation-status
state_24 |>
count(jurisdiction, sort = "TRUE")
state_24 |>
summarize(
state_24, status
)
