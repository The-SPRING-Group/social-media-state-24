---
title: "Social Media and Children in the US"
author: "Oliver Huang"
format: pdf
editor: visual
execute: 
  echo: false
  output: true
---

# Abstract

Over the past year, political sentiment, has pushed companies to regulate social media use for children in the United State. This article will analyze the 300 bills in US state legislators to understand which states are the biggest regulators of social media.

```{r}
#| label: add-library
#| echo: false
#| output: false
library(tidyverse)
library(usmap)
```

# Methods

We scraped the data from the National Conference of State Legislatures. The data was imported on October 3, 2024. We utilized rstudio, along with the tidyverse package and usmap package to read in and analyze the data.

In total, there are 50 states and 9 different statuses for the legislation, including "Enacted", "To governor", "Adopted", "Pending", "Pending - Carryover", "Failed - Adjourned", "Failed", "Vetoed", and " " for NA values. We then cleaned the data to remove all values in the dataset that indicated the state had no legislation related to social media and children.

When analyzing the data, we looked to understand which states introduced the highest number of bills. We also calculated how many bills were passed by state legislatures and in which state. Finally, we included qualitative analysis, studying the political compositions of state legislatures and governments that passed bills regulating social media and child welfare.

```{r}
#| label: data-read-in
state_24 <- read_csv("data/state-sm-24") 

state_24 |> 
  distinct(jurisdiction) |> 
  pull(jurisdiction)

state_24 |> 
  distinct(status) |> 
  pull(status)

state_24 <- state_24 |> 
  mutate(
    jurisdiction = as_factor(jurisdiction),
    status = as_factor(status), 
    state = jurisdiction
  )
```

```{r}
#| label: data-clean
#| output: false
state_24 <- state_24 |> 
  filter(number != "None",
         number != "No regular 2024 session") |> 
  mutate(
    status = fct_relevel(
      status, "Enacted", "To governor", "Adopted", "Pending", "Pending - Carryover", "Failed - Adjourned", "Failed", "Vetoed", 
    )
  )

levels(state_24$status)
```

# Results

```{r}
#| label: legislation-status
state_count <- state_24 |> 
  count(state, sort = "TRUE") |> 
  write_csv("results/state-count-24.csv")
state_count

state_passed <- state_24 |> 
  filter(status == "Enacted" ) |> 
  count(state, sort = "TRUE") |> 
  write_csv("results/state-passed.csv")
state_passed

```

# Visualizing by State

```{r}
#| label: count-pass
plot_usmap(data = state_count, values = "n", color = "green") + 
  scale_fill_continuous(low = "white", high = "green", name = "Number of States") + 
  labs(title = "New England Region", subtitle = "Poverty Percentage Estimates for New England Counties in 2014") +
  theme(legend.position = "right")

```
