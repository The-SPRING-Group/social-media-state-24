---
title: "State Regulation of Social Media and Children in the United States"
author: "Oliver Huang"
institute: "SPRING Program on Health and Society"
format: pdf
editor: visual
execute: 
  echo: false
  output: true
---

# Abstract

Over the past year, political sentiment, has pushed states to regulate social media use for children in the United State. This article will analyze the 300 bills in US state legislators to understand which states are the biggest regulators of social media.

```{r}
#| label: add-library
#| echo: false
#| output: false
library(tidyverse)
library(usmap)
```

# Methods

We scraped the data from the National Conference of State Legislatures. The data was imported on October 3, 2024. We utilized rstudio, along with the tidyverse package and usmap package to read in and analyze the data.

In total, there are 50 states and 9 different statuses for the legislation, including "Enacted", "To governor", "Adopted", "Pending", "Pending - Carryover", "Failed - Adjourned", "Failed", "Vetoed", and " " for NA values. We then cleaned the data to remove all values in the dataset that indicated the state had no legislation related to social media and children.

When analyzing the data, we looked to understand which states introduced the highest number of bills. We also calculated how many bills were passed by state legislatures and in which state. Finally, we included qualitative analysis, studying the political compositions of state legislatures and governments that passed bills regulating social media and child welfare.

```{r}
#| label: data-read-in
#| output: false
state_24 <- read_csv("data/state-sm-24") 

state_24 |> 
  distinct(jurisdiction) |> 
  pull(jurisdiction)

state_24 |> 
  distinct(status) |> 
  pull(status)

state_24 <- state_24 |> 
  mutate(
    jurisdiction = as_factor(jurisdiction),
    status = as_factor(status), 
    state = jurisdiction
  )
```

```{r}
#| label: data-clean
#| output: false
state_none <- state_24 |> 
  filter(number != "None",
         number != "No regular 2024 session")

state_24 <- state_24 |> 
  filter(number != "None",
         number != "No regular 2024 session") |> 
  mutate(
    status = fct_relevel(
      status, "Enacted", "To governor", "Adopted", "Pending", "Pending - Carryover", "Failed - Adjourned", "Failed", "Vetoed", 
    )
  )

levels(state_24$status)
```

# Results

```{r}
#| label: legislation-status
#| output: false
state_count <- state_24 |> 
  count(state, sort = "TRUE") |> 
  write_csv("results/state-count-24.csv")

state_passed <- state_24 |> 
  filter(status == "Enacted" ) |> 
  count(state, sort = "TRUE") |> 
  write_csv("results/state-passed.csv")
state_passed

```
We found 42 states had introduced legislation related to social media and children. Out of the 42 states, 19 states ended up passing legislation related to social media and children. At most, states only passed 3 bills related to social media. 

```{r}
#| label: bill-reg-vis
plot_usmap(data = state_count, values = "n", color = "#333333") + 
  scale_fill_continuous(low = "white", high = "#416555", name = "Number of Bills") + 
  labs(title = "State's with Bills Regulating Social Media in 2024",
       subtitle = "States with No Bills have a Gray Fill",
       caption = "SOURCE: National Conference of State Legislatures. AUTHOR: SPRING Program on Health and Society") +
  theme(legend.position = "right")
```
```{r}
#| label: state-pass-vis
plot_usmap(data = state_passed, values = "n", color = "#333333") + 
  scale_fill_continuous(low = "white", high = "#416555", name = "Number of Bills") + 
  labs(title = "State's that Passed Bills on Social Media",
       subtitle = "States with No Bills have a Gray Fill",
       caption = "SOURCE: National Conference of State Legislatures. AUTHOR: SPRING Program on Health and Society") +
  theme(legend.position = "right")
```

## Partisan Breakdown
The states that have introduced the most legislation are large Democrat or swing states, including New York, California, Illinois, New Jersey, and Virginia.

```{r}
#| label: print-most-bills
head(state_count, n = 10)
```

For states that passed legislation, the amount of states is relatively mixed, with Republican state governors and legislatures, such as Utah, and Democrat state governors and legislatures, such as Minesota, passing bills related to social media regulation. However, only five of the 19 states, Colorado, Maryland, Virginia, Kentucky, Minesota that have passed legislaton regarding children and social media have democrats controlling either one of the two houses of government or the governor's seat.

```{r}
#| label: print-most-bills-passed
head(state_passed, n = 20)
```


# Discussion




